\documentclass[../../Rapport RayTracer]{subfiles}

\begin{document}

Dans le sujet, il nous été demandé de parser un fichier au format pov (Persistence Of Vision). La syntaxe d'un fichier pov ressemble assez à celle du langage C. Pour définir une figure il suffit de préciser son nom. C'est dans le bloc d'un objet, délimité par des accolades, que se trouvent les coordonnées de l'objet, sa couleur, etc. Voici une sphère définit en pov:

 \lstinputlisting[language=pov]{../../code/exemple_sphere.pov}

On retrouve tout d'abord les propriétés intrinsèques de l'objet, donc le centre et le rayon de la sphère dans l'exemple ci-dessus. On peut ensuite rajouter des éléments de couleur dans un bloc pigment et des attributs liés à la lumière, aux ombres dans un bloc finish.
\\
C'est donc pour cela que l'on a choisi d'utiliser la classe StreamTokenizer de Java. Elle fournit des outils simples mais efficaces pour parser des fichiers ressemblant au C/C++. Son principe est simple, on parcours le fichier à l'aide d'un jeton, qui est de type entier. Ce jeton prend des valeurs différentes selon les objets qu'il rencontre. S'il se trouve sur un mot, dans ce cas-là, il sera égal à une constante TT\_WORD, idem pour un nombre avec TT\_NUMBER. Sinon, s'il rencontre un autre caractère, comme par exemple une accolade, il prendra tout simplement la valeur ascii de ce caractère et donc pour la récupérer il faudra caster le jeton en char. Lorsque le jeton est égal à la constante TT\_EOF, cela signifie que nous avons atteint la fin du fichier et que l'on peut arrêter le parsing.


\end{document}